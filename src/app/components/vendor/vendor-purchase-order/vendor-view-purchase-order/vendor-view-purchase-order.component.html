<div class="container mt-4 px-5 py-2 overflow-auto download" #container>
    <h4 class="text-center">Purchase Order</h4>
    <!-- Company Info -->
    <div class="row mb-4 main-row">
        <div class="col-md-6">
            <div class="d-flex align-items-baseline flex-onsmall gap-2">
                <label class="form-label">Company Name</label>
                <span class="editable-field d-block">{{data.users[0].fullName}}</span>
              </div>
              <div class="d-flex align-items-baseline flex-onsmall gap-2">
                <label class="form-label">Street Address</label>
                <span class="editable-field d-block"> {{data.users[0].address}}</span>
              </div>
              <div class="d-flex align-items-baseline flex-onsmall gap-2">
                <label class="form-label">Phone Number</label>
                <span class="editable-field d-block">{{data.users[0].contactnumber}}</span>
              </div>
        </div>
        <!-- <div class="col-md-6 text-end">
            <img src="../../../../../assets/WhatsApp Image 2024-11-18 at 2.30.06 PM.jpeg" width="60%" />
            <div class="d-flex justify-content-end align-items-baseline gap-2">
                <label class="form-label">REQUESTED DATE</label>
                <span class="editable-field2 d-block">{{data.createdAt | date}}</span>
            </div>
            <div class="d-flex justify-content-end align-items-baseline gap-2">
                <label class="form-label">P.O. #</label>
                <span class="editable-field2 d-block">{{data.barcode}}</span>
            </div>
        </div> -->
        <div class="col-md-6 text-end">
            <canvas id="barcodeCanvas" width="300" height="100"></canvas>
            <button class="btn btn-primary mt-2" (click)="printBarcode()">Print Barcode</button>
            <div class="d-flex justify-content-end align-items-baseline gap-2">
                <label class="form-label">REQUESTED DATE</label>
                <span class="editable-field2 d-block">{{data.createdAt | date}}</span>
            </div>
            <div class="d-flex justify-content-end align-items-baseline gap-2">
                <label class="form-label">P.O. #</label>
                <span class="editable-field2 d-block">{{data.barcode}}</span>
            </div>
        </div>
        
    </div>

    <!-- Vendor and Ship To -->
    <!-- <div class="row main-row2 d-flex flex-row">
        <div class="col-md-6">
            <h6 class="fw-bold">VENDOR</h6>
            <div class="d-flex align-items-baseline gap-2">
                <label class="form-label">Company Name</label>
                <span class="editable-field d-block">Dell</span>
            </div>
            <div class="d-flex align-items-baseline gap-2">
                <label class="form-label">Contact or Department</label>
                <span class="editable-field d-block">IT</span>
            </div>
            <div class="d-flex align-items-baseline gap-2">
                <label class="form-label">Street Address</label>
                <span class="editable-field d-block">Las Vegas</span>
            </div>
            <div class="d-flex align-items-baseline gap-2">
                <label class="form-label">City, ST, ZIP</label>
                <span class="editable-field d-block">Plant City, Fl 33563</span>
            </div>
            <div class="d-flex align-items-baseline gap-2">
                <label class="form-label">Phone</label>
                <span class="editable-field d-block">825-490-2127</span>
            </div>
            <div class="d-flex align-items-baseline gap-2">
                <label class="form-label">Fax</label>
                <span class="editable-field d-block">0035</span>
            </div>
        </div>
        <div class="col-md-6">
            <h6 class="fw-bold">SHIP TO</h6>
            <div class="d-flex align-items-baseline gap-2">
                <label class="form-label">Name</label>
                <span class="editable-field d-block">Employee</span>
            </div>
            <div class="d-flex align-items-baseline gap-2">
                <label class="form-label">Company Name</label>
                <span class="editable-field d-block">Patron Foods</span>
            </div>
            <div class="d-flex align-items-baseline gap-2">
                <label class="form-label">Street Address</label>
                <span class="editable-field d-block"> 208 W Alexander St</span>
            </div>
            <div class="d-flex align-items-baseline gap-2">
                <label class="form-label">City, ST, ZIP</label>
                <span class="editable-field d-block"> Plant City, Fl 33563</span>
            </div>
            <div class="d-flex align-items-baseline gap-2">
                <label class="form-label">Phone</label>
                <span class="editable-field d-block">847-850-2577</span>
            </div>
        </div>
    </div> -->

    <!-- Table Section -->
    <div class="mt-4 table-responsive">
        <table class="table table-bordered">
            <thead class="table-light">
                <tr>
                    <th scope="col">ITEM</th>
                    <th scope="col">DESCRIPTION</th>
                    <th scope="col">QUANTITY</th>
                    <th scope="col">UNIT PRICE</th>
                    <th scope="col">TOTAL</th>
                </tr>
            </thead>
            <tbody *ngFor="let item of data.products let i = index">
                <tr>
                    <td>{{i+1}}</td>
                    <td>{{item.product.materialId}}</td>
                    <td>{{item.quantity}}</td>
                    <td>
                        <div class="d-flex align-items-center">
                            <div>{{item.product.price}}</div>
                            <button class="btn update-price" mat-dialog-close (click)="openDialog()">Update Price</button>
                        </div>
                    </td>
                    <td>{{item.price}}</td>
                </tr>
                <!-- <tr>
                    <td>2</td>
                    <td>Mark</td>
                    <td>Otto</td>
                    <td>
                        <div class="d-flex align-items-center">
                            <div>$30</div>
                            <button class="btn update-price" mat-dialog-close (click)="openDialog()">Update Price</button>
                        </div>
                    </td>
                    <td>$10</td>
                </tr>
                <tr>
                    <td>3</td>
                    <td>Mark</td>
                    <td>Otto</td>
                    <td>
                        <div class="d-flex align-items-center">
                            <div>$30</div>
                            <button class="btn update-price" mat-dialog-close (click)="openDialog()">Update Price</button>
                        </div>
                    </td>
                    <td>$12</td>
                </tr> -->
            </tbody>
        </table>
    </div>

    <!-- Total Section -->
    <div class="row mt-3">
        <div class="col-md-8">
            <p>NOTES/INSTRUCTIONS:</p>
        </div>
        <div class="col-md-4">
            <div class="d-flex justify-content-between">
                <label class="form-label">Subtotal:</label>
                <span class="">{{data.totalPrice}}</span>
            </div>
            <!-- <div class="d-flex justify-content-between">
                <label class="form-label">Tax (if applicable):</label>
                <span class="">$0</span>
            </div> -->
            <div class="d-flex justify-content-between">
                <label class="form-label fw-bold">Total:</label>
                <span class="">{{data.totalPrice}}</span>
            </div>
        </div>
    </div>
    <div class="row mt-3 text-center">
        <p class="mb-0">
            For any enquiries regarding this purchase order, Please contact
        </p>

        <div class="d-flex justify-content-center gap-3">
            <p>{{data.users[0].email}}</p>
            <p>Phone: <span>847-850-2577</span></p>
        </div>
    </div>
</div>
<mat-dialog-actions class="d-flex justify-content-between">
    <button class="btn check border gap-2"  (click)="approve(data, 'Approved')">
        <span class="btn-span">Place Purchase Order</span>
        <mat-icon class="btn-icon">check</mat-icon>
    </button>
    <button class="btn close border gap-2" mat-dialog-close  (click)="approve(data, 'Rejected')">
        <span class="btn-span">Reject Purchase Order</span>
        <mat-icon class="btn-icon">close</mat-icon>
    </button>
</mat-dialog-actions>