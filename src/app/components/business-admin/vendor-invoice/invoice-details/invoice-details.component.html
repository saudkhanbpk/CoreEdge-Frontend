<div class="container-fluid px-0 overflow-hidden">
    <div class="form-div">
        <div class="headdiv">
            <div class="heading d-flex align-items-center">
                <button type="button" class="btn p-1 d-flex align-items-center justify-content-center shadow-none"
                    routerLink="/business-admin/vendor-invoice">
                    <mat-icon>chevron_left</mat-icon>
                </button>
                <h1>Invoices</h1>
            </div>
        </div>
        <div class="d-flex gap-2 p-3 border rounded-4 mt-3 fw-small text-muted align-items-center bg-white">
            <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M0.25 11C0.25 5.06294 5.06294 0.25 11 0.25C16.9371 0.25 21.75 5.06294 21.75 11C21.75 16.9371 16.9371 21.75 11 21.75C5.06294 21.75 0.25 16.9371 0.25 11ZM12.25 10C12.25 9.58579 11.9142 9.25 11.5 9.25H9.5C9.08579 9.25 8.75 9.58579 8.75 10C8.75 10.4142 9.08579 10.75 9.5 10.75H10.75V16C10.75 16.4142 11.0858 16.75 11.5 16.75C11.9142 16.75 12.25 16.4142 12.25 16V10ZM12.25 6C12.25 5.58579 11.9142 5.25 11.5 5.25C11.0858 5.25 10.75 5.58579 10.75 6V7C10.75 7.41421 11.0858 7.75 11.5 7.75C11.9142 7.75 12.25 7.41421 12.25 7V6Z" fill="#CE6D6D"/>
                </svg>
                A mismatch between order quantity and received quantity has been identified by the Receiving department. Please review the invoice.                
        </div>
        <div class="mt-3 section-div ">
            <div>
                <h2>Invoice Details</h2>
            </div>
            <div class="px-3">
                <div class="row">
                    <div class="col-lg-2 col-md-4 mb-3">
                        <div class="order-head">Invoice No</div>
                        <div class="order-data">INV-328342</div>
                    </div>
                    <div class="col-lg-2 col-md-4 mb-3">
                        <div class="order-head">Purchase Order No</div>
                        <div class="order-data">01</div>
                    </div>
                    <div class="col-lg-2 col-md-4 mb-3">
                        <div class="order-head">Vendor Name</div>
                        <div class="order-data">Brandon Lee</div>
                    </div>
                    <div class="col-lg-2 col-md-4 mb-3">
                        <div class="order-head">Requested Date</div>
                        <div class="order-data">25th Jan, 2027</div>
                    </div>
                    <div class="col-lg-2 col-md-4 mb-3">
                        <div class="order-head">Received Date</div>
                        <div class="order-data">25th Jan, 2027</div>
                    </div>
                    <div class="col-lg-2 col-md-4 mb-3">
                        <div class="order-head">Total Amount</div>
                        <div class="order-data">$3533</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="mt-3 section-div">
            <div>
                <h2>Items Purchased </h2>
            </div>
            <div class="table-container p-2">
                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead class="thead-dark ">
                            <tr>
                                <th scope="col" class="one">
                                    <div class="table-data">
                                        <div class="d-flex gap-2 align-items-center">
                                            <input class="form-check-input" type="checkbox" value=""
                                                *ngIf="showDisputeOptions" [(ngModel)]="masterCheckboxChecked"
                                                (change)="toggleAllCheckboxes($event)" id="flexCheckChecked">
                                            <div>
                                                No
                                            </div>
                                        </div>
                                    </div>
                                </th>
                                <th scope="col">
                                    <div class="table-data">
                                        Item Name
                                    </div>
                                </th>
                                <th scope="col">
                                    <div class="table-data">
                                        Order Quantity
                                    </div>
                                </th>
                                <th scope="col">
                                    <div class="table-data">
                                        Received Quantity
                                    </div>
                                </th>
                                <th scope="col">
                                    <div class="table-data">
                                       Estimatied Price Deduction
                                    </div>
                                </th>
                                <th scope="col">
                                    <div class="table-data">
                                        Item Price Per unit
                                    </div>
                                </th>
                                <th scope="col" class="two">
                                    <div class="table-data">
                                        Price
                                    </div>
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let item of purchasedItems; let i = index">
                                <td>
                                    <div class="table-data">
                                        <div class="d-flex gap-2 align-items-center">
                                            <input class="form-check-input" type="checkbox" *ngIf="showDisputeOptions"
                                                [(ngModel)]="item.checked">
                                            <div>{{ i + 1 }}</div>
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <div class="table-data">{{ item.name }}</div>
                                </td>
                                <td>
                                    <div class="table-data">{{ item.quantity }}</div>
                                </td>
                                <td>
                                    <div class="table-data">4</div>
                                </td>
                                <td>
                                    <div class="table-data text-danger">$150</div>
                                </td>
                                <td>
                                    <div class="table-data">{{ item.unitPrice | currency }}</div>
                                </td>
                                <td>
                                    <div class="table-data">{{ item.price | currency }}</div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="d-flex justify-content-between align-items-center gap-2 flex-wrap">
                        <div class="d-flex justify-content-end p-3" style="font-size: 18px;">
                            <div style="font-weight: 500;">Subtotal:</div> &nbsp; {{ subtotal | currency }}
                        </div>
                        <div class="d-flex justify-content-end p-3" style="font-size: 18px;">
                            <div style="font-weight: 500;">Discount:</div> &nbsp; {{ subtotal | currency }}
                        </div>
                        <div class="d-flex justify-content-end p-3" style="font-size: 18px;">
                            <div style="font-weight: 500;">Tax:</div> &nbsp; {{ subtotal | currency }}
                        </div>
                        <div class="d-flex justify-content-end p-3" style="font-size: 18px;">
                            <div style="font-weight: 500;">Shipping Charges:</div> &nbsp; {{ subtotal | currency }}
                        </div>
                        <div class="d-flex justify-content-end p-3" style="font-size: 18px;">
                            <div style="font-weight: 500;">Other Charges:</div> &nbsp; {{ subtotal | currency }}
                        </div>
                        <div class="d-flex justify-content-end p-3" style="font-size: 18px;">
                            <div style="font-weight: 500;">Total Amount:</div> &nbsp; {{ subtotal | currency }}
                        </div>
                    </div>
                </div>
                <div class="input-div input-div-no-pad my-3" *ngIf="showDisputeOptions">
                    <label for="">Reason for Dispute:</label>
                    <input type="text" class="form-control" placeholder="Enter reason to file dispute">
                </div>
            </div>
        </div>
        <div class="section-div mt-3">
            <h2>Invoice Receipt</h2>
            <div class="upload-container">
                <div class="upload-icon">
                    <img *ngIf="uploadedImageUrl; else icon" [src]="uploadedImageUrl" alt="Uploaded image"
                        class="image-preview">
                    <ng-template #icon>
                        <img src="../../../../../assets/newicons/Picture.png" alt="">
                    </ng-template>
                </div>
                <div class="upload-details">
                    <label for="fileInput" class="upload-label">
                        <span class="highlight">Upload</span> Invoice Receipt <br>(if Paid)
                    </label>
                    <input type="file" id="fileInput" (change)="onFileSelected($event)" accept="image/*" hidden>
                    <p>SVG, PNG, JPG, or GIF</p>
                </div>
            </div>
        </div>
        <div class="d-flex gap-2 justify-content-end my-2">
            <button class="btn add-btn" *ngIf="!showDisputeOptions">Settle Up</button>
            <button class="btn close" *ngIf="!showDisputeOptions" (click)="openDispute()">Open Dispute</button>
            <button class="btn close" *ngIf="showDisputeOptions">File Dispute</button>
            <button class="btn cancel-btn" *ngIf="showDisputeOptions" (click)="cancelDispute()">Cancel</button>
        </div>
    </div>
</div>